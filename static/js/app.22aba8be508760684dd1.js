webpackJsonp([1],{"+K74":function(t,e){},0:function(t,e){},HDAX:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUwMCIgaGVpZ2h0PSIyNTAwIiB2aWV3Qm94PSIwIDAgMjU2IDI1NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCI+PGcgZmlsbD0iI0NGMjcyRCI+PHBhdGggZD0iTTEyNy44NiAyMjIuMzA0Yy01Mi4wMDUgMC05NC4xNjQtNDIuMTU5LTk0LjE2NC05NC4xNjMgMC01Mi4wMDUgNDIuMTU5LTk0LjE2MyA5NC4xNjQtOTQuMTYzIDUyLjAwNCAwIDk0LjE2MiA0Mi4xNTggOTQuMTYyIDk0LjE2MyAwIDUyLjAwNC00Mi4xNTggOTQuMTYzLTk0LjE2MiA5NC4xNjN6bTAtMjIyLjAyM0M1Ny4yNDUuMjgxIDAgNTcuNTI3IDAgMTI4LjE0MSAwIDE5OC43NTYgNTcuMjQ1IDI1NiAxMjcuODYgMjU2YzcwLjYxNCAwIDEyNy44NTktNTcuMjQ0IDEyNy44NTktMTI3Ljg1OSAwLTcwLjYxNC01Ny4yNDUtMTI3Ljg2LTEyNy44Ni0xMjcuODZ6Ii8+PHBhdGggZD0iTTEzMy4xMTYgOTYuMjk3YzAtMTQuNjgyIDExLjkwMy0yNi41ODUgMjYuNTg2LTI2LjU4NSAxNC42ODMgMCAyNi41ODUgMTEuOTAzIDI2LjU4NSAyNi41ODUgMCAxNC42ODQtMTEuOTAyIDI2LjU4Ni0yNi41ODUgMjYuNTg2LTE0LjY4MyAwLTI2LjU4Ni0xMS45MDItMjYuNTg2LTI2LjU4Nk0xMzMuMTE2IDE1OS45ODNjMC0xNC42ODIgMTEuOTAzLTI2LjU4NiAyNi41ODYtMjYuNTg2IDE0LjY4MyAwIDI2LjU4NSAxMS45MDQgMjYuNTg1IDI2LjU4NiAwIDE0LjY4My0xMS45MDIgMjYuNTg2LTI2LjU4NSAyNi41ODYtMTQuNjgzIDAtMjYuNTg2LTExLjkwMy0yNi41ODYtMjYuNTg2TTY5LjQzMSAxNTkuOTgzYzAtMTQuNjgyIDExLjkwNC0yNi41ODYgMjYuNTg2LTI2LjU4NiAxNC42ODMgMCAyNi41ODYgMTEuOTA0IDI2LjU4NiAyNi41ODYgMCAxNC42ODMtMTEuOTAzIDI2LjU4Ni0yNi41ODYgMjYuNTg2LTE0LjY4MiAwLTI2LjU4Ni0xMS45MDMtMjYuNTg2LTI2LjU4Nk02OS40MzEgOTYuMjk4YzAtMTQuNjgzIDExLjkwNC0yNi41ODUgMjYuNTg2LTI2LjU4NSAxNC42ODMgMCAyNi41ODYgMTEuOTAyIDI2LjU4NiAyNi41ODUgMCAxNC42ODQtMTEuOTAzIDI2LjU4Ni0yNi41ODYgMjYuNTg2LTE0LjY4MiAwLTI2LjU4Ni0xMS45MDItMjYuNTg2LTI2LjU4NiIvPjwvZz48L3N2Zz4="},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("nav",[e("div",{staticClass:"nav-wrapper rgb(242, 47, 70)"},[e("div",{staticClass:"container"},[e("router-link",{staticClass:"brand-logo",attrs:{to:"/"}},[this._v("\n                Invoice Manager\n            ")])],1)])])},staticRenderFns:[]},s={name:"App",components:{NavBar:i("VU/8")({name:"nav-bar",data:function(){return{}}},n,!1,null,null,null).exports}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("NavBar"),this._v(" "),e("router-view")],1)},staticRenderFns:[]},d=i("VU/8")(s,o,!1,null,null,null).exports,l=i("/ocq"),r=i("kxiW"),u=i.n(r),c=(i("881v"),i("cWbj"),u.a.initializeApp({apiKey:"AIzaSyBaLszGDSoX7OvG-muSms2BPaMWna7UgX8",authDomain:"vuefs-prod-1859a.firebaseapp.com",databaseURL:"https://vuefs-prod-1859a.firebaseio.com",projectId:"vuefs-prod-1859a",storageBucket:"vuefs-prod-1859a.appspot.com",messagingSenderId:"300206822368",appId:"1:300206822368:web:263c3936981f10fc"})),m={name:"dashboard",data:function(){return{invoices:[]}},created:function(){var t=this;c.firestore().collection("invoices").orderBy("id").get().then(function(e){e.forEach(function(e){console.log(e.data());var i=e.data().date_issued.seconds,a=new Date(0);a.setUTCSeconds(i);var n=a.toLocaleDateString(),s=e.data().due_date.seconds,o=new Date(0);o.setUTCSeconds(s);var d=o.toLocaleDateString(),l={id:e.id,billed_amount:e.data().billed_amount,date_issued:n,due_amount:e.data().due_amount,due_date:d,int_id:e.data().id,msisdn:e.data().msisdn,paid_amount:e.data().paid_amount,reference:e.data().reference,recipient:e.data().recipient,status:e.data().status};t.invoices.push(l)})})}},v=(new Vue({el:"#firstTable",data:{rows:[{id:1,name:"Chandler Bing",phone:"305-917-1301",profession:"IT Manager"},{id:2,name:"Ross Geller",phone:"210-684-8953",profession:"Paleontologist"},{id:3,name:"Rachel Green",phone:"765-338-0312",profession:"Waitress"},{id:4,name:"Monica Geller",phone:"714-541-3336",profession:"Head Chef"},{id:5,name:"Joey Tribbiani",phone:"972-297-6037",profession:"Actor"},{id:6,name:"Phoebe Buffay",phone:"760-318-8376",profession:"Masseuse"}]}}),{render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{margin:"30px"},attrs:{id:"dashboard"}},[t._m(0),t._v(" "),i("table",{staticClass:"table table-bordered table-sm table-striped  margin: 10px; ",attrs:{id:"firstTable"}},[t._m(1),t._v(" "),i("tbody",t._l(t.invoices,function(e){return i("tr",{key:e.id},[i("td",[t._v(t._s(e.int_id))]),t._v(" "),i("td",[t._v(t._s(e.date_issued))]),t._v(" "),i("td",[t._v(t._s(e.due_date))]),t._v(" "),i("td",[t._v(t._s(e.reference))]),t._v(" "),i("td",[t._v(t._s(e.recipient))]),t._v(" "),i("td",[t._v(t._s(e.msisdn))]),t._v(" "),i("td",[t._v(t._s(e.billed_amount))]),t._v(" "),i("td",[t._v(t._s(e.due_amount))]),t._v(" "),i("td",[t._v(t._s(e.paid_amount))]),t._v(" "),i("td",[t._v(t._s(e.status))]),t._v(" "),i("td",[i("router-link",{staticClass:"secondary-content",attrs:{to:{name:"view-invoice",params:{id:e.int_id}}}},[i("i",{staticClass:"fa fa-eye"})])],1)])}),0)]),t._v(" "),i("div",{staticClass:"fixed-action-btn"},[i("router-link",{staticClass:"btn-floating btn-large red",attrs:{to:"/new-invoice"}},[i("i",{staticClass:"fa fa-plus"})])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{margin:"40px"}},[e("img",{staticStyle:{height:"200px",width:"200px",float:"left"},attrs:{src:i("HDAX")}}),this._v(" "),e("h1",{staticStyle:{float:"left","margin-left":"20px","margin-bottom":"140px",color:"rgb(242, 47, 70)"}},[this._v("Invoices")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("th",[t._v("#")]),t._v(" "),i("th",[t._v("Issued Date")]),t._v(" "),i("th",[t._v("Due Date")]),t._v(" "),i("th",[t._v("Reference")]),t._v(" "),i("th",[t._v("Recipient")]),t._v(" "),i("th",[t._v("MSISDN")]),t._v(" "),i("th",[t._v("Billed")]),t._v(" "),i("th",[t._v("Due ")]),t._v(" "),i("th",[t._v("Paid")]),t._v(" "),i("th",[t._v("Status")]),t._v(" "),i("th",[t._v("Action")])])])}]}),_=i("VU/8")(m,v,!1,null,null,null).exports,p={name:"new-invoice",data:function(){return{billed_amount:null,date_issued:"",due_amount:null,due_date:null,id:null,msisdn:null,paid_amount:null,reference:null,recipient:null,isModalVisible:!1,header:["ITEM","DESCRIPTION","UNIT PRICE"],student:[],item_name:"",item_description:"",item_unit_price:"",items:[],send:!1}},methods:{saveInvoice:function(){var t=this;if(console.log(this.send),this.send){for(var e=0,i=0;i<this.student.length;i++)console.log(this.student[i].item_name),console.log(this.student[i].item_description),console.log(this.student[i].item_unit_price),this.items.push(this.student[i].item_name+", "+this.student[i].item_description+", "+this.student[i].item_unit_price),e+=parseInt(this.student[i].item_unit_price),console.log(" the amount :: ",parseInt(e));this.billed_amount=e,this.due_amount=e;var a=this.due_date;a=this.due_date;console.log("--------------------------------------"),console.log(a),c.firestore().collection("invoices").add({billed_amount:this.billed_amount,date_issued:this.date_issued,due_amount:this.due_amount,due_date:this.due_date,id:this.id,msisdn:this.msisdn,paid_amount:this.paid_amount,reference:this.reference,recipient:this.recipient,items:this.items}).then(function(e){t.$router.push("/")}).catch(function(t){return console.log(err)})}},toggleModal:function(){this.$emit("toggleModal")},showModal:function(){this.isModalVisible=!0},addItem:function(){console.log(" the save item button has been clicked")},addnew:function(){this.student.push({item_name:this.item_name,item_description:this.item_description,item_unit_price:this.item_unit_price}),console.log(this.student.length),console.log(this.items),this.send=!0,console.log(this.send),this.closeModal()},displayModal:function(){this.send=!1,document.getElementById("modalAdd").style.display="block"},closeModal:function(){this.student.length<1&&(this.send=!1),console.log(this.send),document.getElementById("modalAdd").style.display="none"}}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-8",staticStyle:{margin:"0 auto","margin-top":"50px","margin-bottom":"5-px"}},[i("form",{staticClass:"col s12",on:{submit:function(e){return e.preventDefault(),t.saveInvoice(e)}}},[i("div",{staticClass:"card",staticStyle:{"margin-bottom":"30px"}},[i("div",{staticClass:"card-body p-0"},[i("div",[i("h4",{staticClass:"item",staticStyle:{"border-bottom":"none","margin-bottom":"40px"}},[t._v(t._s(t.send))])]),t._v(" "),i("div",{staticClass:"input-field col s12"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.id,expression:"id"}],attrs:{type:"text",required:""},domProps:{value:t.id},on:{input:function(e){e.target.composing||(t.id=e.target.value)}}}),t._v(" "),i("label",[t._v("Invoice ID#")])]),t._v(" "),i("div",{staticClass:"input-field col s12"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.date_issued,expression:"date_issued"}],attrs:{disabled:"",type:"text",required:""},domProps:{value:t.date_issued},on:{input:function(e){e.target.composing||(t.date_issued=e.target.value)}}}),t._v(" "),i("label",[t._v("Issued Date")])]),t._v(" "),i("div",{staticClass:"input-field col s12"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.due_date,expression:"due_date"}],attrs:{type:"date",required:""},domProps:{value:t.due_date},on:{input:function(e){e.target.composing||(t.due_date=e.target.value)}}}),t._v(" "),i("label",[t._v("Due Date")])]),t._v(" "),i("div",{staticClass:"input-field col s12"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.reference,expression:"reference"}],attrs:{type:"text",required:""},domProps:{value:t.reference},on:{input:function(e){e.target.composing||(t.reference=e.target.value)}}}),t._v(" "),i("label",[t._v("Reference")])]),t._v(" "),i("div",{staticClass:"input-field col s12"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.msisdn,expression:"msisdn"}],attrs:{type:"text",required:""},domProps:{value:t.msisdn},on:{input:function(e){e.target.composing||(t.msisdn=e.target.value)}}}),t._v(" "),i("label",[t._v("MSISDN")])]),t._v(" "),i("div",{staticClass:"input-field col s12"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.recipient,expression:"recipient"}],attrs:{type:"text",required:""},domProps:{value:t.recipient},on:{input:function(e){e.target.composing||(t.recipient=e.target.value)}}}),t._v(" "),i("label",[t._v("Recipient")])])])]),t._v(" "),i("div",[i("button",{staticClass:"btn",staticStyle:{"margin-top":"30px","margin-bottom":"5px",float:"right"},attrs:{type:"text",id:"modalBtn"},on:{click:t.displayModal}},[i("i",{staticClass:"fa fa-plus"}),t._v(" Add Invoice Item")])]),t._v(" "),i("div",{staticClass:"main-content",attrs:{id:"mainTable"}},[i("table",{staticClass:"sTable"},[i("tr",t._l(t.header,function(e){return i("th",{key:e},[t._v(t._s(e))])}),0),t._v(" "),t._l(t.student,function(e){return i("tr",{key:e},[i("td",[t._v(t._s(e.item_name))]),t._v(" "),i("td",[t._v(t._s(e.item_description))]),t._v(" "),i("td",[t._v(t._s(e.item_unit_price))])])})],2),t._v(" "),i("div",{staticClass:"modal",attrs:{id:"modalAdd"}},[i("div",{staticClass:"modalForm"},[i("div",{staticClass:"modalHeader"},[i("span",{staticClass:"closeBtn",on:{click:t.closeModal}},[t._v("Ã—")]),t._v(" "),i("h3",{staticClass:"mainHeader"},[t._v("Add Item")])]),t._v(" "),i("div",[i("form",{staticClass:"forms",attrs:{action:""}},[t._v("\n          Item name: "),i("br"),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.item_name,expression:"item_name"}],attrs:{type:"text"},domProps:{value:t.item_name},on:{input:function(e){e.target.composing||(t.item_name=e.target.value)}}}),i("br"),t._v(" \n          Item Description: "),i("br"),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.item_description,expression:"item_description"}],attrs:{type:"text"},domProps:{value:t.item_description},on:{input:function(e){e.target.composing||(t.item_description=e.target.value)}}}),i("br"),t._v(" \n          Item unit price: "),i("br"),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.item_unit_price,expression:"item_unit_price"}],attrs:{type:"text"},domProps:{value:t.item_unit_price},on:{input:function(e){e.target.composing||(t.item_unit_price=e.target.value)}}}),i("br")])]),t._v(" "),i("div",{staticClass:"modalFooter"},[i("span",{staticClass:"addBtn",on:{click:t.addnew}},[t._v("Add Item")])])])])]),t._v(" "),i("button",{staticClass:"btn",staticStyle:{"margin-left":"10px","margin-top":"30px"},attrs:{type:"submit"}},[t._v("Submit")]),t._v(" "),i("router-link",{staticClass:"btn grey",staticStyle:{"margin-left":"10px","margin-top":"30px"},attrs:{to:"/"}},[t._v("Cancel")])],1)])])])},staticRenderFns:[]};var g=i("VU/8")(p,f,!1,function(t){i("+K74")},null,null).exports,h=i("bOdI"),b=i.n(h),C={name:"view-invoice",data:function(){var t;return t={id:null,billed_amount:null,date_issued:null,due_amount:null,due_date:null},b()(t,"id",null),b()(t,"msisdn",null),b()(t,"header",["ITEM","DESCRIPTION","UNIT PRICE"]),b()(t,"paid_amount",null),b()(t,"reference",null),b()(t,"recipient",null),b()(t,"student",null),t},beforeRouteEnter:function(t,e,i){c.firestore().collection("invoices").where("id","==",t.params.id).get().then(function(t){t.forEach(function(t){i(function(e){var i=t.data().date_issued.seconds,a=new Date(0);a.setUTCSeconds(i);var n=a.toLocaleDateString(),s=t.data().due_date.seconds,o=new Date(0);o.setUTCSeconds(s);var d=o.toLocaleDateString(),l=[],r=t.data().items;console.log("item array :: ",r);for(var u=0;u<r.length;u++){console.log("individual item :: ",r[u]);var c=r[u].split(",");console.log(" after the split :: ",c),l.push(c)}e.id=t.data().id,e.billed_amount=t.data().billed_amount,e.date_issued=n,e.due_amount=t.data().due_amount,e.due_date=d,e.id=t.data().id,e.msisdn=t.data().msisdn,e.paid_amount=t.data().paid_amount,e.reference=t.data().reference,e.recipient=t.data().recipient,e.student=l,console.log(t.data())})})})},watch:{$route:"fetchData"},methods:{fetchData:function(){var t=this;c.firestore().collection("invoices").where("id","==",this.$route.params.id).get().then(function(e){e.forEach(function(e){var i=[],a=e.data().items;console.log("item array :: ",a);for(var n=0;n<a.length;n++){console.log("individual item :: ",a[n]);var s=a[n].split(",");console.log(" after the split :: ",s),i.push(s)}t.id=e.data().id,t.billed_amount=e.data().billed_amount,t.date_issued=e.data().date_issued,t.due_amount=e.data().due_amount,t.due_date=e.data().due_date,t.id=e.data().id,t.msisdn=e.data().msisdn,t.paid_amount=e.data().paid_amount,t.reference=e.data().reference,t.recipient=e.data().recipient,t.student=i})})},deleteEmployee:function(){var t=this;confirm("Are you sure?")&&c.firestore().collection("invoices").where("id","==",this.$route.params.id).get().then(function(e){e.forEach(function(e){e.ref.delete(),t.$router.push("/")})})}}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-8",staticStyle:{margin:"0 auto","margin-top":"50px"}},[i("div",{staticClass:"card",attrs:{id:"invoice"}},[i("div",{staticClass:"card-body p-0"},[i("div",[i("h4",{staticClass:"item",staticStyle:{"border-bottom":"none","margin-bottom":"40px"}},[t._v(t._s(t.reference))])]),t._v(" "),i("div",{staticClass:"item"},[t._v("Invoice ID#:       "),i("span",{staticStyle:{"margin-left":"20px"}},[t._v("  "+t._s(t.id)+"  ")])]),t._v(" "),i("div",{staticClass:"item"},[t._v("Issued Date:       "),i("span",{staticStyle:{"margin-left":"20px"}},[t._v("   "+t._s(t.date_issued)+" ")])]),t._v(" "),i("div",{staticClass:"item"},[t._v("Due Date:          "),i("span",{staticStyle:{"margin-left":"20px"}},[t._v("   "+t._s(t.due_date)+" ")])]),t._v(" "),i("div",{staticClass:"item"},[t._v("Reference:         "),i("span",{staticStyle:{"margin-left":"20px"}},[t._v("   "+t._s(t.reference)+" ")])]),t._v(" "),i("div",{staticClass:"item"},[t._v("MSISDN:            "),i("span",{staticStyle:{"margin-left":"20px"}},[t._v("   "+t._s(t.msisdn)+" ")])]),t._v(" "),i("div",{staticClass:"item"},[t._v("Billed Amount:     "),i("span",{staticStyle:{"margin-left":"20px"}},[t._v("  "+t._s(t.billed_amount)+" ")])]),t._v(" "),i("div",{staticClass:"item"},[t._v("Amount Due:        "),i("span",{staticStyle:{"margin-left":"20px"}},[t._v("  "+t._s(t.due_amount)+" ")])]),t._v(" "),i("div",{staticClass:"item",staticStyle:{"margin-bottom":"30px"}},[t._v("Amount Paid:     "),i("span",{staticStyle:{"margin-left":"20px"}},[t._v("     "+t._s(t.paid_amount)+" ")])]),t._v(" "),i("div",{staticClass:"main-content",attrs:{id:"mainTable"}},[i("table",{staticClass:"sTable"},[i("tr",t._l(t.header,function(e){return i("th",{key:e},[t._v(t._s(e))])}),0),t._v(" "),t._l(t.student,function(e){return i("tr",{key:e},[i("td",[t._v(t._s(e[0]))]),t._v(" "),i("td",[t._v(t._s(e[1]))]),t._v(" "),i("td",[t._v(t._s(e[2]))])])})],2)])])]),t._v(" "),i("router-link",{staticClass:"btn grey",attrs:{to:"/"}},[t._v("Back")]),t._v(" "),i("button",{staticClass:"btn red",on:{click:t.deleteEmployee}},[t._v("Delete")])],1),t._v(" "),i("div",{staticClass:"fixed-action-btn",staticStyle:{"margin-bottom":"70px"}},[i("router-link",{staticClass:"btn-floating btn-large black",attrs:{to:{name:"invoice-item",params:{id:t.id}}}},[i("i",{staticClass:"fa fa-print"})])],1),t._v(" "),i("div",{staticClass:"fixed-action-btn"},[i("router-link",{staticClass:"btn-floating btn-large red",attrs:{to:{name:"edit-invoice",params:{id:t.id}}}},[i("i",{staticClass:"fa fa-pencil"})])],1)])])},staticRenderFns:[]};var N=i("VU/8")(C,y,!1,function(t){i("SoNx")},null,null).exports,I={name:"edit-invoice",data:function(){return{id:null,billed_amount:null,date_issued:null,due_amount:null,due_date:null,msisdn:null,paid_amount:null,reference:null,recipient:null}},beforeRouteEnter:function(t,e,i){c.firestore().collection("invoices").where("id","==",t.params.id).get().then(function(t){t.forEach(function(t){i(function(e){var i=t.data().date_issued.seconds,a=new Date(0);a.setUTCSeconds(i);var n=a.toLocaleDateString(),s=t.data().due_date.seconds,o=new Date(0);o.setUTCSeconds(s);var d=o.toLocaleDateString();e.id=t.data().id,e.billed_amount=t.data().billed_amount,e.date_issued=n,e.due_amount=t.data().due_amount,e.due_date=d,e.id=t.data().id,e.msisdn=t.data().msisdn,e.paid_amount=t.data().paid_amount,e.reference=t.data().reference,e.recipient=t.data().recipient})})})},watch:{$route:"fetchData"},methods:{fetchData:function(){var t=this;c.firestore().collection("invoices").where("id","==",this.$$route.params.id).get().then(function(e){e.forEach(function(e){t.id=e.data().id,t.billed_amount=e.data().billed_amount,t.date_issued=e.data().date_issued,t.due_amount=e.data().due_amount,t.due_date=e.data().due_date,t.id=e.data().id,t.msisdn=e.data().msisdn,t.paid_amount=e.data().paid_amount,t.reference=e.data().reference,t.recipient=e.data().recipient})})},updateEmployee:function(){var t=this;c.firestore().collection("invoices").where("id","==",this.$route.params.id).get().then(function(e){e.forEach(function(e){var i;e.ref.update((i={id:t.id,billed_amount:t.billed_amount,date_issued:t.date_issued,due_amount:t.due_amount,due_date:t.due_date},b()(i,"id",t.id),b()(i,"msisdn",t.msisdn),b()(i,"paid_amount",t.paid_amount),b()(i,"reference",t.reference),b()(i,"recipient",t.recipient),i)).then(function(){t.$router.push({name:"view-invoice",params:{id:t.id}})})})})}}},D={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"edit-invoice"}},[i("h3",[t._v("Edit Employee")]),t._v(" "),i("div",{staticClass:"row"},[i("form",{staticClass:"col s12",staticStyle:{margin:"70px"},on:{submit:function(e){return e.preventDefault(),t.updateEmployee(e)}}},[i("div",{staticClass:"row"},[i("div",{staticClass:"input-field col s12"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.id,expression:"id"}],attrs:{type:"text",required:""},domProps:{value:t.id},on:{input:function(e){e.target.composing||(t.id=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"input-field col s12"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.billed_amount,expression:"billed_amount"}],attrs:{type:"text",required:""},domProps:{value:t.billed_amount},on:{input:function(e){e.target.composing||(t.billed_amount=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"input-field col s12"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.date_issued,expression:"date_issued"}],attrs:{type:"text",required:""},domProps:{value:t.date_issued},on:{input:function(e){e.target.composing||(t.date_issued=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"input-field col s12"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.due_amount,expression:"due_amount"}],attrs:{type:"text",required:""},domProps:{value:t.due_amount},on:{input:function(e){e.target.composing||(t.due_amount=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"input-field col s12"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.due_date,expression:"due_date"}],attrs:{type:"text",required:""},domProps:{value:t.due_date},on:{input:function(e){e.target.composing||(t.due_date=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"input-field col s12"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.msisdn,expression:"msisdn"}],attrs:{type:"text",required:""},domProps:{value:t.msisdn},on:{input:function(e){e.target.composing||(t.msisdn=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"input-field col s12"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.paid_amount,expression:"paid_amount"}],attrs:{type:"text",required:""},domProps:{value:t.paid_amount},on:{input:function(e){e.target.composing||(t.paid_amount=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"input-field col s12"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.reference,expression:"reference"}],attrs:{type:"text",required:""},domProps:{value:t.reference},on:{input:function(e){e.target.composing||(t.reference=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"input-field col s12"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.recipient,expression:"recipient"}],attrs:{type:"text",required:""},domProps:{value:t.recipient},on:{input:function(e){e.target.composing||(t.recipient=e.target.value)}}})])]),t._v(" "),i("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("Submit")]),t._v(" "),i("router-link",{staticClass:"btn grey",attrs:{to:"/"}},[t._v("Cancel")])],1)])])},staticRenderFns:[]},w=i("VU/8")(I,D,!1,null,null,null).exports,T=i("c/Tr"),x=i.n(T),M=i("eMjc"),A=i.n(M),j=i("l9mu"),L={name:"invoice-item",data:function(){var t;return t={id:null,billed_amount:null,date_issued:null,due_amount:null,due_date:null},b()(t,"id",null),b()(t,"msisdn",null),b()(t,"paid_amount",null),b()(t,"reference",null),b()(t,"recipient",null),b()(t,"uploading",!1),b()(t,"uploadEnd",!1),b()(t,"downloadURL",""),b()(t,"progress",null),b()(t,"local_png_url",null),b()(t,"localpdf_url",null),b()(t,"student",null),b()(t,"header",["ID #","ITEM","DESCRIPTION","QUANTITY","UNIT PRICE","TOTAL"]),t},beforeRouteEnter:function(t,e,i){c.firestore().collection("invoices").where("id","==",t.params.id).get().then(function(t){t.forEach(function(t){i(function(e){var i=t.data().date_issued.seconds,a=new Date(0);a.setUTCSeconds(i);var n=a.toLocaleDateString(),s=t.data().due_date.seconds,o=new Date(0);o.setUTCSeconds(s);var d=o.toLocaleDateString(),l=[],r=t.data().items;console.log("item array :: ",r);for(var u=0;u<r.length;u++){console.log("individual item :: ",r[u]);var c=r[u].split(","),m=c[c.length-1];c.splice(0,0,u),c.splice(3,0,"1"),c.splice(4,0,m),console.log(" after the split :: ",c),l.push(c)}e.id=t.data().id,e.billed_amount=t.data().billed_amount,e.date_issued=n,e.due_amount=t.data().due_amount,e.due_date=d,e.id=t.data().id,e.msisdn=t.data().msisdn,e.paid_amount=t.data().paid_amount,e.reference=t.data().reference,e.recipient=t.data().recipient,e.student=l,null===t.data().paid_amount&&(e.paid_amount=0)})})})},watch:{$route:"fetchData"},methods:{postInvoice:function(t,e){Vue.http.post("https://onekoechflask.herokuapp.com/invoice",{phone_number:this.msisdn,customer_name:this.recipient,invoice_amount:this.due_amount,invoice_number:this.reference,png_url:t,pdf_url:e}).then(function(t){console.log(t.body),alert("invoice sent to ")}).catch(function(t){return console.log(t)})},pdfInvoice:function(){console.log("i am sending te invoice over"),Vue.http.post("https://www.birichi.xyz/freepdf/tutorial/pdf_invoice.php",b()({id:this.id,billed_amount:this.billed_amount,date_issued:this.date_issued,due_amount:this.due_amount,due_date:this.due_date,msisdn:this.msisdn,paid_amount:this.paid_amount,reference:this.reference,recipient:this.recipient,student:this.student,header:["ID #","ITEM","DESCRIPTION","QUANTITY","UNIT PRICE","TOTAL"]},"due_amount",this.due_amount)).then(function(t){console.log(t.body),alert("invoice sent to ")}).catch(function(t){return console.log(t)})},fetchData:function(){var t=this;c.firestore().collection("invoices").where("id","==",this.$route.params.id).get().then(function(e){e.forEach(function(e){var i=[],a=e.data().items;console.log("item array :: ",a);for(var n=0;n<a.length;n++){console.log("individual item :: ",a[n]);var s=a[n].split(",");console.log(" after the split :: ",s),i.push(s)}t.id=e.data().id,t.billed_amount=e.data().billed_amount,t.date_issued=e.data().date_issued,t.due_amount=e.data().due_amount,t.due_date=e.data().due_date,t.id=e.data().id,t.msisdn=e.data().msisdn,t.paid_amount=e.data().paid_amount,t.reference=e.data().reference,t.recipient=e.data().recipient,t.student=i})})},deleteEmployee:function(){var t=this;confirm("Are you sure?")&&c.firestore().collection("invoices").where("id","==",this.$route.params.id).get().then(function(e){e.forEach(function(e){e.ref.delete(),t.$router.push("/")})})},print:function(){A()(document.querySelector("invoice")).then(function(t){var e=new jsPDF("p","mm","a4");e.addImage(t.toDataURL("image/png"),"PNG",0,0,211,298),e.save("reciept.pdf")})},showCaptureRef:function(){console.log("this.$refs.capture: "+this.$refs.capture);return this.$refs.capture},downloadVisualReport:function(){console.log("campaign-view#downloadVisualReport"),window.html2canvas(this.showCaptureRef()).then(function(t){document.body.appendChild(t)}).catch(function(t){console.log("Erorr descargando reporte visual",t)})},download:function(){var t=this,e=this.reference;A()(document.querySelector("#invoice",{scale:4}),{imageTimeout:5e3,useCORS:!0}).then(function(i){document.getElementById("invoice");var a=i.toDataURL("image/png"),n=new j("portrait","mm","a4");n.addImage(a,"JPEG",5,5,200,287);var s=n.output("blob");console.log(s);var o=a.split(";"),d=o[0].split(":")[1],l=o[1].split(",")[1],r=t.b64toBlob(l,d);console.log(r),t.fileupload(s,r,e)})},fileupload:function(t,e,i){console.log(" this is the invoice number ::",i);var a=c.storage().ref("invoices/"+i+".pdf"),n=this.postInvoice,s=a.put(t);s.on("state_changed",function(t){var e=t.bytesTransferred/t.totalBytes;this.progress=e,console.log("Upload is "+100*e+"% done")},function(t){console.log(t)},function(){s.snapshot.ref.getDownloadURL().then(function(t){console.log("File local_pdf_url at",t);var a=t,s=c.storage().ref("invoices/"+i+".png").put(e);s.on("state_changed",function(t){var e=t.bytesTransferred/t.totalBytes;this.progress=e,console.log("Upload is "+100*e+"% done"),1===e&&console.log(" the second file uploaded")},function(t){console.log(t)},function(){s.snapshot.ref.getDownloadURL().then(function(t){console.log("File file_image at",t),n(a,t)})})})})},processFile:function(t){this.someData=t.target.files[0],this.fileupload(this.someData),console.log(this.someData)},selectFile:function(){this.$refs.uploadInput.click()},detectFiles:function(t){var e=this,i=t.target.files||t.dataTransfer.files;x()(Array(i.length).keys()).map(function(t){e.upload(i[t])})},upload:function(t){this.fileName=t.name,this.uploading=!0,this.uploadTask=firestorage.ref("images/"+t.name).put(t)},deleteImage:function(){var t=this;firestorage.ref("images/"+this.fileName).delete().then(function(){t.uploading=!1,t.uploadEnd=!1,t.downloadURL=""}).catch(function(t){console.error("file delete error occured: "+t)})},b64toBlob:function(t,e,i){e=e||"",i=i||512;for(var a=atob(t),n=[],s=0;s<a.length;s+=i){for(var o=a.slice(s,s+i),d=new Array(o.length),l=0;l<o.length;l++)d[l]=o.charCodeAt(l);var r=new Uint8Array(d);n.push(r)}return new Blob(n,{type:e})}}},S={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("div",{staticClass:"card",attrs:{id:"invoice"}},[i("div",{staticClass:"card-body p-0"},[i("div",{staticClass:"row p-5"},[t._m(0),t._v(" "),i("div",{staticClass:"col-md-6 text-right"},[i("p",{staticClass:"font-weight-bold mb-1"},[t._v("Invoice "+t._s(t.reference))]),t._v(" "),i("p",[t._v("Due to: "+t._s(t.due_date))])])]),t._v(" "),i("div",{staticClass:"row pb-5 p-5"},[i("div",{staticClass:"col-md-6"},[i("p",{staticClass:"font-weight-bold mb-4"},[t._v("Client Information")]),t._v(" "),i("p",{staticClass:"mb-1"},[t._v(t._s(t.recipient))]),t._v(" "),i("p",{staticClass:"mb-1"},[t._v("Buruburu, Nairobi")]),t._v(" "),i("p",{staticClass:"mb-1"},[t._v(t._s(t.msisdn))])]),t._v(" "),i("div",{staticClass:"col-md-6 text-right"},[i("p",{staticClass:"font-weight-bold mb-4"},[t._v("Payment Details")]),t._v(" "),i("p",{staticClass:"mb-1"},[i("span",[t._v("Billed Amount: ")]),t._v(" "+t._s(t.billed_amount))]),t._v(" "),i("p",{staticClass:"mb-1"},[i("span",[t._v("Paid Amount: ")]),t._v("  "+t._s(t.paid_amount))]),t._v(" "),i("p",{staticClass:"mb-1"},[i("span",[t._v("Amount Due: ")]),t._v("  "+t._s(t.due_amount))]),t._v(" "),i("p",{staticClass:"mb-1"},[i("span",[t._v("Name: ")]),t._v(" "+t._s(t.recipient))])])]),t._v(" "),i("div",{staticClass:"row p-5"},[i("div",{staticClass:"col-md-12"},[i("div",{staticClass:"main-content",attrs:{id:"mainTable"}},[i("table",{staticClass:"sTable"},[i("tr",t._l(t.header,function(e){return i("th",{key:e},[t._v(t._s(e))])}),0),t._v(" "),t._l(t.student,function(e){return i("tr",{key:e},[i("td",[t._v(t._s(e[3]))]),t._v(" "),i("td",[t._v(t._s(e[0]))]),t._v(" "),i("td",[t._v(t._s(e[1]))]),t._v(" "),i("td",[t._v("1")]),t._v(" "),i("td",[t._v(t._s(e[2]))]),t._v(" "),i("td",[t._v(t._s(e[2]))])])})],2)])])]),t._v(" "),i("div",{staticClass:"d-flex flex-row-reverse bg-dark text-white p-4"},[i("div",{staticClass:"py-3 px-5 text-right"},[i("div",{staticClass:"mb-2"},[t._v("Billed Amount")]),t._v(" "),i("div",{staticClass:"h2 font-weight-light"},[t._v(t._s(t.billed_amount))])]),t._v(" "),i("div",{staticClass:"py-3 px-5 text-right"},[i("div",{staticClass:"mb-2"},[t._v("Paid Amount")]),t._v(" "),i("div",{staticClass:"h2 font-weight-light"},[t._v(t._s(t.paid_amount))])]),t._v(" "),i("div",{staticClass:"py-3 px-5 text-right"},[i("div",{staticClass:"mb-2"},[t._v("Due Amount")]),t._v(" "),i("div",{staticClass:"h2 font-weight-light"},[t._v(t._s(t.due_amount))])])])])])])]),t._v(" "),i("div",{staticClass:"fixed-action-btn  btn-floating btn-large #25D366",on:{click:t.pdfInvoice}},[i("i",{staticClass:"fa fa-whatsapp"})])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-md-6"},[e("img",{staticStyle:{height:"200px",width:"200px",float:"left"},attrs:{src:i("HDAX")}}),this._v(" "),e("h1",{staticStyle:{float:"left","margin-left":"20px","margin-bottom":"140px",color:"rgb(242, 47, 70)"}},[this._v("Invoices")])])}]};var E=i("VU/8")(L,S,!1,function(t){i("pn5A")},null,null).exports,U=i("8+8L");a.a.use(l.a,U.a);var O=new l.a({routes:[{path:"/",name:"dashboard",component:_},{path:"/new-invoice",name:"new-invoice",component:g},{path:"/:id",name:"view-invoice",component:N},{path:"/edit/:id",name:"edit-invoice",component:w},{path:"/item/:id",name:"invoice-item",component:E}]}),k=i("mtWM"),P=i.n(k),Y=i("Rf8U"),R=i.n(Y);a.a.use(U.a,R.a,P.a),a.a.prototype.$axios=window.axios,a.a.config.productionTip=!1,new a.a({el:"#app",router:O,VueResource:U.a,components:{App:d},template:"<App/>"})},SoNx:function(t,e){},pn5A:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.22aba8be508760684dd1.js.map